# 高阶函数

什么是高阶函数？实际上在前面的文章中我们已经接触到了高阶函数的概念。如果一个函数，它可以接受函数作为参数，可以将函数作为返回值，可以动态的创造新函数，我们就将他称为高阶函数。

也就是说，我们在前面学到的，**β规约、抽象符号、函数组合、柯里化**等特性中，已经蕴含了高阶函数的思想。在函数式程序设计中，我们可以这样说：如果一种程序语言支持**函数作为一等公民（first class）**，那么它就是支持高阶函数的。

所谓函数作为一等公民，可以认为就是上述的将函数作为参数、返回值、动态创建的这种特性的描述。

现在马上定义一个高阶函数的例子。

```haskell
eval :: a -> (a -> a -> a) -> a
eval a op b = op a b

add :: a -> a -> a
add a b = a + b

sub :: a -> a -> a
sub a b = a - b

mul :: a -> a -> a
mul a b = a * b

div' :: a -> a -> a
div' a b = a / b

-- 现在我们可以通过eval函数，来调用add、sub、mul、div'这几个函数。————为什么是div'而不是div？因为haskell本身就有div函数。

print $ eval 1 add 2 
-- 输出3
print $ eval 2 sub 2
-- 输出0
print $ eval 2 mul 2
-- 输出4
peint $ eval 4 div' 2
-- 输出2
```

根据以上代码可以看到，eval这个高阶函数，并不关心他的参数op————也就是另一个函数具体做了什么，他只关心op的类型，也就是说，当你想要把一个函数作为参数传递给另一个函数的时候，需要关心的仅仅是这个函数的类型是否符合描述。

**类型！**，在haskell中非常重要，曾有人这样描述，如果你想要学haskell，那么你需要锻炼出看一眼函数类型就知道它在干什么的能力。反之亦然，你更需要锻炼出能在函数类型里描述清楚这个函数做了什么的能力。

顺便一提，上面的代码为了让初学者看懂，其实是很繁琐的。有些函数本来无需定义。

```haskell
print $ eval 1 (+) 2
print $ eval 2 (-) 2
print $ eval 2 (*) 2
print $ eval 4 (/) 2
-- 结果和上面完全一样。
```

没错，在haskell中，`+ - * /`这样的运算符也是函数,他们的类型是`Num a => a -> a -> a`（除了`/`）

有人可能会说，上面这种应用，是不是有点多此一举？如果每次都是这样的单个手动使用，当然是多此一举，但是如果我们使用的次数非常多呢？

比如这样。

```haskell
print $ map (\(a,op,b) -> eval a op b) [(1,(+),2),(2,(-),2),(2,(*),2),(4,(/),2)]
```

这句话输出的内容和前面的程序基本一致，不过是用列表包裹起来的。同学们可以自行研究一下，看不懂也没关系，因为下篇文章会介绍到的。

下文，常用高阶函数。