# 函数组合

什么是函数组合？
如果有两个函数f，g满足

$$
f:A->B,g:B->C
$$

那么就有

$$
g(f(x)) = y,x∈A,y∈C
$$

记作

$$
(g°f)(x) = y,x∈A,y∈C
$$

也就是数学上的复合函数。如果我没记错的话，是这样写的。

在函数式编程里，这就是函数的组合。

**函数组合是函数式编程的核心概念。**

如果一种程序语言支持函数组合，那么它就是函数式的程序语言，如果这门语言可以很舒服的完成函数组合，那么他就是优秀的函数式语言了。

# haskell中的函数组合。

当然了，数学不是编程的必修课，我们只需要会用就行了。

而在haskell中，函数组合是非常方便的。

```haskell
addOne n = n + 1
-- 定义一个函数，执行加一的操作

addTwo n = n + 2
-- 定义一个加二的操作

addThree = addOne . addTwo
-- 将加一的函数和加二的函数组合，得到加三的函数。
```

没错，在haskell中，只需要用`.`来连接两个函数就可以简单的完成函数的组合，兵器创造一个新的函数。

可以尝试给上面三个函数标记类型，这是随堂小测。（不是因为我懒）

甚至可以连续的使用函数组合

```haskell
addSix = addOne . addTwo . addThree
```

如果有细心的同学可能会发现，在前面我曾提及过一种和函数组合很相似的操作`$`。

这种和函数组合类似的操作称为**函数应用**。它的效果大致可以描述为，将`$`右边的部分优先计算，将结果作为参数返回给左边的函数。

```haskell
print $ addOne 1

-- 优先计算右边的addOne 1，将它的结果2作为参数传递给print函数。
```

从效果上看，`$`改变了函数应用的优先顺序，更深层的解释，则需要理解`$`和`.`的函数类型。这一点我会在后面的文章中提到。（没错，这两个操作符也是函数）

# 函数的部分应用

当有一个多参函数的时候，你可以对他部分应用，而部分应用的结果仍然是一个函数。

现在来尝试重新定义一下上面的几个函数。

```haskell
add :: a -> a -> a
add a b = a + b

addOne :: a -> a
addOne = add 1

addTwo :: a -> a
addTwo = add 2

addThree :: a -> a 
addThree = add 3

addSix :: a -> a
addSix = add 6
```

可以看到，通过一次只给`add`传递一个参数，轻易的创造了几个新的函数。这一次我添加了函数类型，是为了更细致的观察这个过程。

当给函数`add::a -> a -> a`传递一个参数,我们“改变”了它的类型。`add 1::a -> a`。敏感的读者看到这里应该猜到了为什么haskell的函数类型写成`a -> a -> a`的形式，而非`(a,a) -> a`了吧。

为了深入的理解这种特性，我们将在下一篇文章中介绍一种叫**柯里化**的重要特性。